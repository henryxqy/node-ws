const _0x243745=_0x492d;(function(_0xae7307,_0xb20156){const _0x1bce7d=_0x492d,_0x570488=_0xae7307();while(!![]){try{const _0x30eedb=parseInt(_0x1bce7d(0x204))/0x1+-parseInt(_0x1bce7d(0x224))/0x2+parseInt(_0x1bce7d(0x242))/0x3+parseInt(_0x1bce7d(0x1d7))/0x4*(-parseInt(_0x1bce7d(0x1dc))/0x5)+-parseInt(_0x1bce7d(0x24c))/0x6+-parseInt(_0x1bce7d(0x201))/0x7+-parseInt(_0x1bce7d(0x216))/0x8*(-parseInt(_0x1bce7d(0x246))/0x9);if(_0x30eedb===_0xb20156)break;else _0x570488['push'](_0x570488['shift']());}catch(_0x1680ca){_0x570488['push'](_0x570488['shift']());}}}(_0x15b6,0xed96e));const os=require('os'),http=require(_0x243745(0x1db)),fs=require('fs'),axios=require(_0x243745(0x209)),net=require(_0x243745(0x21b)),path=require(_0x243745(0x23c)),crypto=require(_0x243745(0x203)),{Buffer}=require(_0x243745(0x237)),{exec,execSync}=require(_0x243745(0x1ed)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x243745(0x249)][_0x243745(0x223)]||_0x243745(0x205),NEZHA_SERVER=process[_0x243745(0x249)][_0x243745(0x21d)]||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process[_0x243745(0x249)][_0x243745(0x236)]||'',DOMAIN=process[_0x243745(0x249)][_0x243745(0x21c)]||_0x243745(0x23f),AUTO_ACCESS=process[_0x243745(0x249)]['AUTO_ACCESS']||!![],WSPATH=process['env'][_0x243745(0x212)]||UUID[_0x243745(0x1f6)](0x0,0x8),SUB_PATH=process[_0x243745(0x249)][_0x243745(0x235)]||_0x243745(0x213),NAME=process[_0x243745(0x249)][_0x243745(0x239)]||_0x243745(0x229),PORT=process[_0x243745(0x249)][_0x243745(0x1e8)]||0x1eb4;let ISP='';function _0x15b6(){const _0x5672f6=['NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','Server','arm','http','65AdjqFK','writeHead','send','substr','text/html','post','type','log','Automatic\x20Access\x20Task\x20added\x20successfully','includes','writeFileSync','https://arm64.ssss.nyc.mn/v1','PORT','https://amd64.ssss.nyc.mn/v1','pop','update','country_code','child_process',':443?encryption=none&security=tls&sni=','readFile','message','/bin/bash','toString','1.1.1.1','base64','sha224','slice','npm','&fp=chrome&type=ws&host=','finish','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','npm\x20download\x20successfully','catch','isp','Status','chmod\x20+x\x20npm','https://','5821613xtWNqo','connection','crypto','636213LXeFpJ','bc97f674-c578-4940-9234-0a1da46041b9','aarch64','write','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','axios','https://api.ip.sb/geoip','https://dns.google/resolve?name=','npm\x20is\x20already\x20running,\x20skip\x20running...','application/json','2053','decode','digest',':443?security=tls&sni=','WSPATH','subabc','Unknown','index.html','104ywYaOW','npm\x20is\x20running','true','data','https://amd64.ssss.nyc.mn/agent','net','DOMAIN','NEZHA_SERVER','join','hex','npm\x20running\x20error:','createWriteStream','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','UUID','2543418vdDJGk','close','length','8.8.4.4','end','Hug','connect','get','pipe','once','stream','443','client_secret:\x20','every','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Server\x20is\x20running\x20on\x20port\x20','https://oooo.serv00.net/add-url','SUB_PATH','NEZHA_KEY','buffer','split','NAME','text/plain','url','path','reduce','map','1234.abc.com','concat','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','4085883XzQkrt','test','replace','&path=%2F','3226950UHawoQ','false','readUInt16BE','env','2087','unlink','10803564gtuSSk','https://arm64.ssss.nyc.mn/agent','readUInt8','setsid\x20nohup\x20./npm\x20-s\x20','config.yaml','application/dns-json','error','then','548368BRrQAe'];_0x15b6=function(){return _0x5672f6;};return _0x15b6();}const GetISP=async()=>{const _0x4f9fce=_0x243745;try{const _0x4fdf2e=await axios['get'](_0x4f9fce(0x20a)),_0x34cde7=_0x4fdf2e[_0x4f9fce(0x219)];ISP=(_0x34cde7[_0x4f9fce(0x1ec)]+'-'+_0x34cde7[_0x4f9fce(0x1fd)])['replace'](/ /g,'_');}catch(_0x20739d){ISP=_0x4f9fce(0x214);}};GetISP();const httpServer=http['createServer']((_0x313cb4,_0x5e078f)=>{const _0xb8c1d4=_0x243745;if(_0x313cb4['url']==='/'){const _0x5b1cd2=path[_0xb8c1d4(0x21e)](__dirname,_0xb8c1d4(0x215));fs[_0xb8c1d4(0x1ef)](_0x5b1cd2,'utf8',(_0x678dc5,_0x51c223)=>{const _0x3bdb9a=_0xb8c1d4;if(_0x678dc5){_0x5e078f['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x5e078f[_0x3bdb9a(0x228)]('Hello\x20world!');return;}_0x5e078f[_0x3bdb9a(0x1dd)](0xc8,{'Content-Type':_0x3bdb9a(0x1e0)}),_0x5e078f[_0x3bdb9a(0x228)](_0x51c223);});return;}else{if(_0x313cb4[_0xb8c1d4(0x23b)]==='/'+SUB_PATH){const _0x2f5d2b=NAME?NAME+'-'+ISP:ISP,_0x54c367='vless://'+UUID+'@'+DOMAIN+_0xb8c1d4(0x1ee)+DOMAIN+_0xb8c1d4(0x1f8)+DOMAIN+_0xb8c1d4(0x245)+WSPATH+'#'+_0x2f5d2b,_0x4f7b81='trojan://'+UUID+'@'+DOMAIN+_0xb8c1d4(0x211)+DOMAIN+_0xb8c1d4(0x1f8)+DOMAIN+_0xb8c1d4(0x245)+WSPATH+'#'+_0x2f5d2b,_0x8d0ed5=_0x54c367+'\x0a'+_0x4f7b81,_0x2ad3e1=Buffer['from'](_0x8d0ed5)[_0xb8c1d4(0x1f2)](_0xb8c1d4(0x1f4));_0x5e078f[_0xb8c1d4(0x1dd)](0xc8,{'Content-Type':_0xb8c1d4(0x23a)}),_0x5e078f['end'](_0x2ad3e1+'\x0a');}else _0x5e078f[_0xb8c1d4(0x1dd)](0x194,{'Content-Type':_0xb8c1d4(0x23a)}),_0x5e078f['end']('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x243745(0x1d9))]({'server':httpServer}),uuid=UUID[_0x243745(0x244)](/-/g,''),DNS_SERVERS=[_0x243745(0x227),_0x243745(0x1f3)];function resolveHost(_0xe193fa){return new Promise((_0x4ff684,_0x3e0ca1)=>{const _0x150544=_0x492d;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x150544(0x243)](_0xe193fa)){_0x4ff684(_0xe193fa);return;}let _0x2b49ea=0x0;function _0x378ce0(){const _0x7781e8=_0x150544;if(_0x2b49ea>=DNS_SERVERS[_0x7781e8(0x226)]){_0x3e0ca1(new Error('Failed\x20to\x20resolve\x20'+_0xe193fa+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x11f285=DNS_SERVERS[_0x2b49ea];_0x2b49ea++;const _0x5ea996=_0x7781e8(0x20b)+encodeURIComponent(_0xe193fa)+'&type=A';axios[_0x7781e8(0x22b)](_0x5ea996,{'timeout':0x1388,'headers':{'Accept':_0x7781e8(0x1d4)}})['then'](_0x55a417=>{const _0x48ef53=_0x7781e8,_0x855bc2=_0x55a417['data'];if(_0x855bc2[_0x48ef53(0x1fe)]===0x0&&_0x855bc2['Answer']&&_0x855bc2['Answer'][_0x48ef53(0x226)]>0x0){const _0x2caef2=_0x855bc2['Answer']['find'](_0x42b22a=>_0x42b22a[_0x48ef53(0x1e2)]===0x1);if(_0x2caef2){_0x4ff684(_0x2caef2[_0x48ef53(0x219)]);return;}}_0x378ce0();})[_0x7781e8(0x1fc)](_0x4ad298=>{_0x378ce0();});}_0x378ce0();});}function handleVlessConnection(_0x3cedf9,_0x4e673d){const _0x494b30=_0x243745,[_0x5cf6a7]=_0x4e673d,_0xab123d=_0x4e673d['slice'](0x1,0x11);if(!_0xab123d['every']((_0x40fc8d,_0x2794c5)=>_0x40fc8d==parseInt(uuid[_0x494b30(0x1df)](_0x2794c5*0x2,0x2),0x10)))return![];let _0x1b288b=_0x4e673d[_0x494b30(0x1f6)](0x11,0x12)[_0x494b30(0x24e)]()+0x13;const _0x12c517=_0x4e673d[_0x494b30(0x1f6)](_0x1b288b,_0x1b288b+=0x2)[_0x494b30(0x248)](0x0),_0x718746=_0x4e673d['slice'](_0x1b288b,_0x1b288b+=0x1)[_0x494b30(0x24e)](),_0x40348a=_0x718746==0x1?_0x4e673d[_0x494b30(0x1f6)](_0x1b288b,_0x1b288b+=0x4)[_0x494b30(0x21e)]('.'):_0x718746==0x2?new TextDecoder()[_0x494b30(0x20f)](_0x4e673d[_0x494b30(0x1f6)](_0x1b288b+0x1,_0x1b288b+=0x1+_0x4e673d[_0x494b30(0x1f6)](_0x1b288b,_0x1b288b+0x1)[_0x494b30(0x24e)]())):_0x718746==0x3?_0x4e673d['slice'](_0x1b288b,_0x1b288b+=0x10)['reduce']((_0x515103,_0x1aa9b9,_0x1fc36b,_0x41b461)=>_0x1fc36b%0x2?_0x515103[_0x494b30(0x240)](_0x41b461[_0x494b30(0x1f6)](_0x1fc36b-0x1,_0x1fc36b+0x1)):_0x515103,[])['map'](_0x4ae9d2=>_0x4ae9d2[_0x494b30(0x248)](0x0)['toString'](0x10))[_0x494b30(0x21e)](':'):'';_0x3cedf9[_0x494b30(0x1de)](new Uint8Array([_0x5cf6a7,0x0]));const _0x2d2fc7=createWebSocketStream(_0x3cedf9);return resolveHost(_0x40348a)[_0x494b30(0x1d6)](_0x7056b1=>{const _0x399dfe=_0x494b30;net[_0x399dfe(0x22a)]({'host':_0x7056b1,'port':_0x12c517},function(){const _0x560f5d=_0x399dfe;this[_0x560f5d(0x207)](_0x4e673d['slice'](_0x1b288b)),_0x2d2fc7['on'](_0x560f5d(0x1d5),()=>{})[_0x560f5d(0x22c)](this)['on']('error',()=>{})[_0x560f5d(0x22c)](_0x2d2fc7);})['on'](_0x399dfe(0x1d5),()=>{});})[_0x494b30(0x1fc)](_0x285450=>{const _0x1bc187=_0x494b30;net[_0x1bc187(0x22a)]({'host':_0x40348a,'port':_0x12c517},function(){const _0x4a90a3=_0x1bc187;this['write'](_0x4e673d['slice'](_0x1b288b)),_0x2d2fc7['on'](_0x4a90a3(0x1d5),()=>{})[_0x4a90a3(0x22c)](this)['on'](_0x4a90a3(0x1d5),()=>{})['pipe'](_0x2d2fc7);})['on'](_0x1bc187(0x1d5),()=>{});}),!![];}function handleTrojanConnection(_0x34f8f1,_0x3da2c2){const _0x502540=_0x243745;try{if(_0x3da2c2[_0x502540(0x226)]<0x3a)return![];const _0xf6e01a=_0x3da2c2[_0x502540(0x1f6)](0x0,0x38)[_0x502540(0x1f2)](),_0x3c8fdd=[UUID];let _0x264678=null;for(const _0x774a19 of _0x3c8fdd){const _0x1bb6a4=crypto['createHash'](_0x502540(0x1f5))[_0x502540(0x1eb)](_0x774a19)[_0x502540(0x210)](_0x502540(0x21f));if(_0x1bb6a4===_0xf6e01a){_0x264678=_0x774a19;break;}}if(!_0x264678)return![];let _0x19ab0f=0x38;_0x3da2c2[_0x19ab0f]===0xd&&_0x3da2c2[_0x19ab0f+0x1]===0xa&&(_0x19ab0f+=0x2);const _0x2cbcef=_0x3da2c2[_0x19ab0f];if(_0x2cbcef!==0x1)return![];_0x19ab0f+=0x1;const _0x40427c=_0x3da2c2[_0x19ab0f];_0x19ab0f+=0x1;let _0x441209,_0x25c27d;if(_0x40427c===0x1)_0x441209=_0x3da2c2[_0x502540(0x1f6)](_0x19ab0f,_0x19ab0f+0x4)[_0x502540(0x21e)]('.'),_0x19ab0f+=0x4;else{if(_0x40427c===0x3){const _0x1527d0=_0x3da2c2[_0x19ab0f];_0x19ab0f+=0x1,_0x441209=_0x3da2c2[_0x502540(0x1f6)](_0x19ab0f,_0x19ab0f+_0x1527d0)['toString'](),_0x19ab0f+=_0x1527d0;}else{if(_0x40427c===0x4)_0x441209=_0x3da2c2[_0x502540(0x1f6)](_0x19ab0f,_0x19ab0f+0x10)[_0x502540(0x23d)]((_0x30bcb7,_0x1aa48e,_0xe1776b,_0x3fbe78)=>_0xe1776b%0x2?_0x30bcb7['concat'](_0x3fbe78[_0x502540(0x1f6)](_0xe1776b-0x1,_0xe1776b+0x1)):_0x30bcb7,[])[_0x502540(0x23e)](_0x46f129=>_0x46f129[_0x502540(0x248)](0x0)[_0x502540(0x1f2)](0x10))[_0x502540(0x21e)](':'),_0x19ab0f+=0x10;else return![];}}_0x25c27d=_0x3da2c2[_0x502540(0x248)](_0x19ab0f),_0x19ab0f+=0x2;_0x19ab0f<_0x3da2c2[_0x502540(0x226)]&&_0x3da2c2[_0x19ab0f]===0xd&&_0x3da2c2[_0x19ab0f+0x1]===0xa&&(_0x19ab0f+=0x2);const _0x6ba6a0=createWebSocketStream(_0x34f8f1);return resolveHost(_0x441209)[_0x502540(0x1d6)](_0x2e65f8=>{const _0x317b6d=_0x502540;net[_0x317b6d(0x22a)]({'host':_0x2e65f8,'port':_0x25c27d},function(){const _0x3ed0af=_0x317b6d;_0x19ab0f<_0x3da2c2['length']&&this[_0x3ed0af(0x207)](_0x3da2c2[_0x3ed0af(0x1f6)](_0x19ab0f)),_0x6ba6a0['on'](_0x3ed0af(0x1d5),()=>{})[_0x3ed0af(0x22c)](this)['on']('error',()=>{})[_0x3ed0af(0x22c)](_0x6ba6a0);})['on']('error',()=>{});})[_0x502540(0x1fc)](_0x532ae9=>{const _0x2ff90c=_0x502540;net[_0x2ff90c(0x22a)]({'host':_0x441209,'port':_0x25c27d},function(){const _0x8c66b5=_0x2ff90c;_0x19ab0f<_0x3da2c2[_0x8c66b5(0x226)]&&this['write'](_0x3da2c2[_0x8c66b5(0x1f6)](_0x19ab0f)),_0x6ba6a0['on'](_0x8c66b5(0x1d5),()=>{})[_0x8c66b5(0x22c)](this)['on'](_0x8c66b5(0x1d5),()=>{})['pipe'](_0x6ba6a0);})['on'](_0x2ff90c(0x1d5),()=>{});}),!![];}catch(_0x4bf53b){return![];}}wss['on'](_0x243745(0x202),(_0x296b3c,_0x19327a)=>{const _0x5afe27=_0x243745,_0x18b3c5=_0x19327a[_0x5afe27(0x23b)]||'';_0x296b3c[_0x5afe27(0x22d)](_0x5afe27(0x1f0),_0x4dd818=>{const _0x1ce1cc=_0x5afe27;if(_0x4dd818[_0x1ce1cc(0x226)]>0x11&&_0x4dd818[0x0]===0x0){const _0x32e818=_0x4dd818['slice'](0x1,0x11),_0x6dfa18=_0x32e818[_0x1ce1cc(0x231)]((_0x29ba47,_0x29d639)=>_0x29ba47==parseInt(uuid[_0x1ce1cc(0x1df)](_0x29d639*0x2,0x2),0x10));if(_0x6dfa18){!handleVlessConnection(_0x296b3c,_0x4dd818)&&_0x296b3c[_0x1ce1cc(0x225)]();return;}}!handleTrojanConnection(_0x296b3c,_0x4dd818)&&_0x296b3c[_0x1ce1cc(0x225)]();})['on'](_0x5afe27(0x1d5),()=>{});});const getDownloadUrl=()=>{const _0x967b96=_0x243745,_0x530f74=os['arch']();return _0x530f74===_0x967b96(0x1da)||_0x530f74==='arm64'||_0x530f74===_0x967b96(0x206)?!NEZHA_PORT?_0x967b96(0x1e7):_0x967b96(0x24d):!NEZHA_PORT?_0x967b96(0x1e9):_0x967b96(0x21a);},downloadFile=async()=>{const _0x51f96b=_0x243745;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x6479f7=getDownloadUrl(),_0x103a52=await axios({'method':_0x51f96b(0x22b),'url':_0x6479f7,'responseType':_0x51f96b(0x22e)}),_0x26cebe=fs[_0x51f96b(0x221)](_0x51f96b(0x1f7));return _0x103a52['data'][_0x51f96b(0x22c)](_0x26cebe),new Promise((_0x202529,_0x15bcda)=>{const _0x3120e7=_0x51f96b;_0x26cebe['on'](_0x3120e7(0x1f9),()=>{const _0x147d63=_0x3120e7;console[_0x147d63(0x1e3)](_0x147d63(0x1fb)),exec(_0x147d63(0x1ff),_0xce9429=>{if(_0xce9429)_0x15bcda(_0xce9429);_0x202529();});}),_0x26cebe['on'](_0x3120e7(0x1d5),_0x15bcda);});}catch(_0x5ca3dc){throw _0x5ca3dc;}},runnz=async()=>{const _0x198d3d=_0x243745;try{const _0x2e85ed=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':'utf-8'});if(_0x2e85ed['trim']()!==''){console[_0x198d3d(0x1e3)](_0x198d3d(0x20c));return;}}catch(_0x27274f){}await downloadFile();let _0x56a9c3='',_0x263229=[_0x198d3d(0x22f),'8443','2096',_0x198d3d(0x24a),'2083',_0x198d3d(0x20e)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x378fd5=_0x263229[_0x198d3d(0x1e5)](NEZHA_PORT)?'--tls':'';_0x56a9c3=_0x198d3d(0x24f)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x378fd5+_0x198d3d(0x232);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3560f3=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x198d3d(0x238)](':')[_0x198d3d(0x1ea)]():'',_0xedf581=_0x263229['includes'](_0x3560f3)?_0x198d3d(0x218):_0x198d3d(0x247),_0x11e2a8=_0x198d3d(0x230)+NEZHA_KEY+_0x198d3d(0x1fa)+NEZHA_SERVER+_0x198d3d(0x241)+_0xedf581+_0x198d3d(0x208)+UUID;fs[_0x198d3d(0x1e6)](_0x198d3d(0x1d3),_0x11e2a8);}_0x56a9c3=_0x198d3d(0x222);}else{console['log'](_0x198d3d(0x1d8));return;}}try{exec(_0x56a9c3,{'shell':_0x198d3d(0x1f1)},_0x26b0a5=>{const _0x3807d4=_0x198d3d;if(_0x26b0a5)console[_0x3807d4(0x1d5)](_0x3807d4(0x220),_0x26b0a5);else console[_0x3807d4(0x1e3)](_0x3807d4(0x217));});}catch(_0x385c64){console[_0x198d3d(0x1d5)]('error:\x20'+_0x385c64);}};async function addAccessTask(){const _0x256c58=_0x243745;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x3252c6=_0x256c58(0x200)+DOMAIN;try{const _0x4b1194=await axios[_0x256c58(0x1e1)](_0x256c58(0x234),{'url':_0x3252c6},{'headers':{'Content-Type':_0x256c58(0x20d)}});console[_0x256c58(0x1e3)](_0x256c58(0x1e4));}catch(_0x33ff12){}}function _0x492d(_0x32c5ec,_0x23396b){_0x32c5ec=_0x32c5ec-0x1d3;const _0x15b631=_0x15b6();let _0x492d1d=_0x15b631[_0x32c5ec];return _0x492d1d;}const delFiles=()=>{const _0x745c95=_0x243745;fs[_0x745c95(0x24b)](_0x745c95(0x1f7),()=>{}),fs[_0x745c95(0x24b)](_0x745c95(0x1d3),()=>{});};httpServer['listen'](PORT,()=>{const _0x22ae46=_0x243745;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x22ae46(0x1e3)](_0x22ae46(0x233)+PORT);});
